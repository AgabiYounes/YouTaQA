  <page>
    <title>Divergence</title>
    <ns>0</ns>
    <id>8328</id>
    <revision>
      <id>942706801</id>
      <parentid>942698132</parentid>
      <timestamp>2020-02-26T09:36:58Z</timestamp>
      <contributor>
        <username>Kamil Kielczewski</username>
        <id>14206551</id>
      </contributor>
      <comment>/* Tensor field */ change x,y,z to x1,x2,x3</comment>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text xml:space="preserve">{{short description|Vector operator producing the scalar quantity of a flow at a point}}
{{about|divergence in vector calculus|divergence of infinite series|Divergent series|divergence in statistics|Divergence (statistics)|other uses}}
[[File:Divergence_(captions).svg|500px|thumb|upright=1.75|alt= A vector field with diverging vectors, a vector field with converging vectors, and a vector field with parallel vectors that neither diverge nor converge|The divergence of different vector fields. The divergence of vectors from point (x,y) equals the sum of the partial derivative-with-respect-to-x of the x-component and the partial derivative-with-respect-to-y of the y-component at that point:
&lt;math&gt;\nabla\!\cdot(\mathbf{V}(x,y))=\frac{\partial\ {\mathbf{V}_x(x,y)}}{\partial{x}}+\frac{\partial\ {\mathbf{V}_y(x,y)}}{\partial{y}}&lt;/math&gt;]]

In [[vector calculus]], '''divergence''' is a [[vector operator]] that operates on a [[vector field]], producing a [[scalar field]] giving the quantity of the vector field's [[Current sources and sinks|source]] at each point. More technically, the divergence represents the volume density of the outward [[flux]] of a vector field from an infinitesimal volume around a given point.

As an example, consider air as it is heated or cooled. The [[velocity]] of the air at each point defines a vector field. While air is heated in a region, it expands in all directions, and thus the velocity field points outward from that region. The divergence of the velocity field in that region would thus have a positive value. While the air is cooled and thus contracting, the divergence of the velocity has a negative value.
== Physical interpretation of divergence ==
In physical terms, the divergence of a vector field is the extent to which the vector field flux behaves like a source at a given point. It is a local measure of its &quot;outgoingness&quot; – the extent to which there is more of the field vectors exiting an infinitesimal region of space than entering it.   A point at which the flux is outgoing has positive divergence, and is often called a &quot;source&quot; of the field.  A point at which the flux is directed inward has negative divergence, and is often called a &quot;sink&quot; of the field.  The greater the flux of field through a small surface enclosing a given point, the greater the value of divergence at that point.  A point at which there is zero flux through an enclosing surface has zero divergence. 

The divergence of a vector field is often illustrated using the example of the [[velocity field]] of a fluid, a liquid or gas.  A moving gas has a [[velocity]], a speed and direction, at each point which can be represented by a [[vector (mathematics and physics)|vector]], so the velocity of the gas forms a [[vector field]]. If a gas is heated, it will expand.  This will cause a net motion of gas particles outward in all directions.  Any closed surface in the gas will enclose gas which is expanding, so there will be an outward flux of gas through the surface.  So the velocity field will have positive divergence everywhere.  Similarly, if the gas is cooled, it will contract.  There will be more room for gas particles in any volume, so the external pressure of the fluid will cause a net flow of gas volume inward through any closed surface.  Therefore the velocity field has negative divergence everywhere.  In contrast in an unheated gas with a constant density, the gas may be moving, but the volume rate of gas flowing into any closed surface must equal the volume rate flowing out, so the ''net'' flux of fluid through any closed surface is zero. Thus the gas velocity has zero divergence everywhere.  A field which has zero divergence everywhere is called [[solenoidal vector field|solenoidal]].  

If the fluid is heated only at one point or small region, or a small tube is introduced which supplies a source of additional fluid at one point, the fluid there will expand, pushing fluid particles around it outward in all directions. This will cause an outward velocity field throughout the fluid, centered on the heated point.  Any closed surface enclosing the heated point will have a flux of fluid particles passing out of it, so there is positive divergence at that point.  However any closed surface ''not'' enclosing the point will have a constant density of fluid inside, so just as many fluid particles are entering as leaving the volume, thus the net flux out of the volume is zero.  Therefore the divergence at any other point is zero.

== Definition ==
[[Image:Definition of divergence.svg|thumb|The divergence at a point {{math|'''x'''}} is the limit of the ratio of the flux &lt;math&gt;\Phi&lt;/math&gt; through the surface {{math|S&lt;sub&gt;i&lt;/sub&gt;}} ''(red arrows)'' to the volume &lt;math&gt;|V_\text{i}|&lt;/math&gt;  for any sequence of closed regions {{math|V&lt;sub&gt;1&lt;/sub&gt;, V&lt;sub&gt;2&lt;/sub&gt;, V&lt;sub&gt;3&lt;/sub&gt;...}} enclosing {{math|'''x'''}} that approaches zero volume:&lt;br/&gt; &lt;math&gt;\operatorname{div} \mathbf{F} = \lim_{|V_\text{i}| \rightarrow 0}  {\Phi(S_\text{i}) \over |V_\text{i}|}&lt;/math&gt;     ]] 

The divergence of a vector field {{math|'''F'''('''x''')}} at a point {{math|'''x'''&lt;sub&gt;0&lt;/sub&gt;}} is defined as the [[limit (mathematics)|limit]] of the ratio of the [[surface integral]] of {{math|'''F'''}} out of the surface of a closed volume {{math|''V''}} enclosing {{math|'''x'''&lt;sub&gt;0&lt;/sub&gt;}} to the volume of {{math|''V''}}, as {{math|''V''}} shrinks to zero
:{{oiint
| preintegral = &lt;math&gt;\left. \operatorname{div} \mathbf{F} \right|_\mathbf{x_0} = \lim_{V \rightarrow 0}  {1 \over |V|}&lt;/math&gt;
| intsubscpt = &lt;math&gt;\scriptstyle S(V)&lt;/math&gt;
| integrand = &lt;math&gt;\mathbf{F}\cdot\mathbf{\hat n} \, dS&lt;/math&gt;
}}
where {{math|{{abs|''V''}}}} is the volume of {{math|''V''}}, {{math|''S''(''V'')}} is the boundary of {{math|''V''}}, and {{math|'''n̂'''}} is the outward [[normal vector|unit normal]] to that surface.  It can be shown that the above limit always converges to the same value for any sequence of volumes that contain {{math|'''x'''&lt;sub&gt;0&lt;/sub&gt;}} and approach zero volume.  The result, {{math|div '''F'''}}, is a scalar function of {{math|'''x'''}}. 

Since this definition is coordinate-free, it shows that the divergence is the same in any [[coordinate system]].  However it is not often used practically to calculate divergence; when the vector field is given in a coordinate system the coordinate definitions below are much simpler to use.

A vector field with zero divergence everywhere is called ''[[solenoidal vector field|solenoidal]]'' – in which case any closed surface has no net flux across it.

== Definition in coordinates ==
===Cartesian coordinates===

In three-dimensional Cartesian coordinates, the divergence of a [[continuously differentiable]] [[vector field]] &lt;math&gt;\mathbf{F} = F_x\mathbf{i} + F_y\mathbf{j} + F_z\mathbf{k}&lt;/math&gt; is defined as the [[scalar (mathematics)|scalar]]-valued function:

:&lt;math&gt;\operatorname{div} \mathbf{F} = \nabla\cdot\mathbf{F} = \left( \frac{\partial}{\partial x}, \frac{\partial}{\partial y}, \frac{\partial}{\partial z} \right) \cdot (F_x,F_y,F_z) = \frac{\partial F_x}{\partial x}+\frac{\partial F_y}{\partial y}+\frac{\partial F_z}{\partial z}.&lt;/math&gt;

Although expressed in terms of coordinates, the result is invariant under [[Rotation matrix|rotations]], as the physical interpretation suggests. This is because the trace of the [[Jacobian matrix and determinant|Jacobian matrix]] of an {{math|''N''}}-dimensional vector field {{math|'''F'''}} in {{math|''N''}}-dimensional space is invariant under any invertible linear transformation.

The common notation for the divergence {{math|∇ · '''F'''}} is a convenient mnemonic, where the dot denotes an operation reminiscent of the [[dot product]]: take the components of the {{math|∇}} operator (see [[del]]), apply them to the corresponding components of {{math|'''F'''}}, and sum the results. Because applying an operator is different from multiplying the components, this is considered an [[abuse of notation]].

=== Cylindrical coordinates ===
For a vector expressed in '''local''' unit [[Cylindrical coordinate system|cylindrical coordinates]] as
:&lt;math&gt;\mathbf{F} = \mathbf{e}_r F_r + \mathbf{e}_\theta F_\theta + \mathbf{e}_z F_z,&lt;/math&gt;
where {{math|'''e'''&lt;sub&gt;''a''&lt;/sub&gt;}} is the unit vector in direction {{math|''a''}}, the divergence is{{refn|[http://mathworld.wolfram.com/CylindricalCoordinates.html Cylindrical coordinates] at Wolfram Mathworld}}
:&lt;math&gt;\operatorname{div} \mathbf F = \nabla\cdot\mathbf F = \frac1r \frac{\partial}{\partial r} \left(rF_r\right) + \frac1r \frac{\partial F_\theta}{\partial\theta} + \frac{\partial F_z}{\partial z}.
&lt;/math&gt;

The use of local coordinates is vital for the validity of the expression. If we consider {{math|'''x'''}} the position vector and the functions &lt;math&gt;r(\mathbf{x})&lt;/math&gt;, &lt;math&gt;\theta(\mathbf{x})&lt;/math&gt;, and &lt;math&gt;z(\mathbf{x})&lt;/math&gt;, which assign the corresponding '''global''' cylindrical coordinate to a vector, in general &lt;math&gt;r(\mathbf{F}(\mathbf{x}))\neq F_r(\mathbf{x})&lt;/math&gt;, &lt;math&gt;\theta(\mathbf{F}(\mathbf{x}))\neq F_{\theta}(\mathbf{x})&lt;/math&gt;, and &lt;math&gt;z(\mathbf{F}(\mathbf{x}))\neq F_z(\mathbf{x})&lt;/math&gt;. In particular, if we consider the identity function  &lt;math&gt;\mathbf{F}(\mathbf{x})= \mathbf{x}&lt;/math&gt;, we find that:

:&lt;math&gt;\theta(\mathbf{F}(\mathbf{x})) = \theta \neq F_{\theta}(\mathbf{x}) = 0&lt;/math&gt;.

=== Spherical coordinates ===
In [[spherical coordinates]], with {{math|''θ''}} the angle with the {{math|''z''}} axis and {{math|''φ''}} the rotation around the {{math|''z''}} axis, and &lt;math&gt;\mathbf{F}&lt;/math&gt; again written in local unit coordinates, the divergence is{{refn|[http://mathworld.wolfram.com/SphericalCoordinates.html Spherical coordinates] at Wolfram Mathworld}}
:&lt;math&gt;\operatorname{div}\mathbf{F} = \nabla\cdot\mathbf F = \frac1{r^2} \frac{\partial}{\partial r}\left(r^2 F_r\right) + \frac1{r\sin\theta} \frac{\partial}{\partial \theta} (\sin\theta\, F_\theta) + \frac1{r\sin\theta} \frac{\partial F_\varphi}{\partial \varphi}.&lt;/math&gt;

=== Tensor field ===
Let's &lt;math&gt;\mathbf{A}&lt;/math&gt; be continuously differentiable second-order [[tensor field]]  defined as follows:

:&lt;math&gt;\mathbf{A} = \begin{bmatrix}
A_{11} &amp; A_{12} &amp; A_{13} \\
A_{21} &amp; A_{22} &amp; A_{23} \\
A_{31} &amp; A_{32} &amp; A_{33} 
\end{bmatrix}&lt;/math&gt;

the divergence in cartesian coordinate system is a first-order tensor field{{sfn|Gurtin|1981|loc=p. 30}} and can be defined in two ways&lt;ref&gt;{{cite web |title=1.14 Tensor Calculus I: Tensor Fields |work=Foundations of Continuum Mechanics |url=http://homepages.engineering.auckland.ac.nz/~pkel015/SolidMechanicsBooks/Part_III/Chapter_1_Vectors_Tensors/Vectors_Tensors_14_Tensor_Calculus.pdf }}&lt;/ref&gt;:

:&lt;math&gt;\operatorname{div} (\mathbf{A}) 
= \cfrac{\partial A_{ik}}{\partial x_k}~\mathbf{e}_i = A_{ik,k}~\mathbf{e}_i 
= \begin{bmatrix}
\dfrac{\partial A_{11}}{\partial x_1} +\dfrac{\partial A_{12}}{\partial x_2} +\dfrac{\partial A_{13}}{\partial x_3} \\
\dfrac{\partial A_{21}}{\partial x_1} +\dfrac{\partial A_{22}}{\partial x_2} +\dfrac{\partial A_{23}}{\partial x_3} \\
\dfrac{\partial A_{31}}{\partial x_1} +\dfrac{\partial A_{32}}{\partial x_2} +\dfrac{\partial A_{33}}{\partial x_3}
\end{bmatrix}&lt;/math&gt;

and 
&lt;ref&gt;{{cite book |
authors=William M. Deen | 
title=Introduction to Chemical Engineering Fluid Mechanics |
publisher= Cambridge University Press |
date=2016 |
page=133 |
isbn=978-1-107-12377-9 |
url=https://books.google.pl/books?id=H1CeDAAAQBAJ&amp;pg=PA146&amp;lpg=PA146&amp;dq=cauchy+momentum+asymmetric&amp;source=bl&amp;ots=sw8_J47Rql&amp;sig=ACfU3U16wa13uc2URdV37LsErtxavYBUEw&amp;hl=pl&amp;sa=X&amp;ved=2ahUKEwiu4p3Nz-LnAhWMyKYKHYqaAF0Q6AEwB3oECAgQAQ#v=onepage&amp;q=cauchy%20momentum%20asymmetric&amp;f=false
}}&lt;/ref&gt;
&lt;ref&gt;{{cite article |
authors=Sara Noferesti, Hassan Ghassemi, Hashem Nowruzi | 
title=Numerical Investigation on the Effects of Obstruction and Side Ratio on Non-Newtonian Fluid Flow Behavior Around a Rectangular Barrier |
date=15 May 2019 |
page=56,59 |
doi=10.17512/jamcm.2019.1.05 |
url=http://amcm.pcz.pl/get.php?article=2019_1/art_05.pdf 
}}&lt;/ref&gt;
&lt;ref&gt;{{cite book |
authors=Tasos C. Papanastasiou, Georgios C. Georgiou, Andreas N. Alexandrou |
title=Viscous Fluid Flow |
date=2000 |
page=66,68 |
publisher=CRC Press |
isbn=0-8493-1606-5 |
url=https://www.mobt3ath.com/uplode/book/book-46462.pdf 
}}&lt;/ref&gt;
&lt;ref&gt;{{cite web |
author=Adam Powell |
title=The Navier-Stokes Equations |
date=12 April 2010 |
url=ftp://texmex.mit.edu/pub/emanuel/CLASS/12.340/navier-stokes(2).pdf 
}}&lt;/ref&gt;:

:&lt;math&gt;
\nabla\cdot \mathbf A = \cfrac{\partial A_{ki}}{\partial x_k}~\mathbf{e}_i = A_{ki,k}~\mathbf{e}_i = 
\begin{bmatrix}
\dfrac{\partial A_{11}}{\partial x_1} + \dfrac{\partial A_{21}}{\partial x_2} + \dfrac{\partial A_{31}}{\partial x_3} \\
\dfrac{\partial A_{12}}{\partial x_1} + \dfrac{\partial A_{22}}{\partial x_2} + \dfrac{\partial A_{32}}{\partial x_3} \\
\dfrac{\partial A_{13}}{\partial x_1} + \dfrac{\partial A_{23}}{\partial x_2} + \dfrac{\partial A_{33}}{\partial x_3} \\
\end{bmatrix}
&lt;/math&gt;

We have

:&lt;math&gt;\operatorname{div} (\mathbf{A^T}) = \nabla\cdot\mathbf A&lt;/math&gt;

W should note that if tensor is symmetric &lt;math&gt;A_{ij}=A_{ji}&lt;/math&gt; then &lt;math&gt;\operatorname{div} (\mathbf{A}) = \nabla\cdot\mathbf A&lt;/math&gt; and this cause that often in literature this two definitions (and symbols &lt;math&gt;\mathrm{div}&lt;/math&gt; and &lt;math&gt;\nabla\cdot&lt;/math&gt; ) are switched and interchangeably used (especially in mechanics equations where tensor symmetry is assumed).

=== General coordinates ===
Using [[Einstein notation]] we can consider the divergence in [[Curvilinear_coordinates| general coordinates]], which we write as {{math|''x''&lt;sup&gt;1&lt;/sup&gt;, ..., ''x''&lt;sup&gt;''i''&lt;/sup&gt;, ...,''x''&lt;sup&gt;''n''&lt;/sup&gt;}}, where {{mvar|n}} is the number of dimensions of the domain. Here, the upper index refers to the number of the coordinate or component, so {{math|''x''&lt;sup&gt;2&lt;/sup&gt;}} refers to the second component, and not the quantity {{math|''x''}} squared. The index variable {{math|''i''}} is used to refer to an arbitrary element, such as {{math|''x''&lt;sup&gt;''i''&lt;/sup&gt;}}. The divergence can then be written via the [https://www.genealogy.math.ndsu.nodak.edu/id.php?id=59087 Voss]-[[Hermann_Weyl| Weyl]] formula,&lt;ref&gt;{{cite web|last1=Grinfeld|first1=Pavel|title=The Voss-Weyl Formula|url=https://www.youtube.com/watch?v=BD2AiFk651E&amp;list=PLlXfTHzgMRULkodlIEqfgTS-H1AY_bNtq&amp;index=23|accessdate=9 January 2018|language=English}}&lt;/ref&gt; as:

:&lt;math&gt;\operatorname{div}(\mathbf{F}) = \frac{1}{\rho} \frac{\partial \left(\rho\, F^i\right)}{\partial x^i},&lt;/math&gt;

where &lt;math&gt;\rho&lt;/math&gt; is the local coefficient of the [[volume element]] and {{math|''F''{{sup|''i''}} }} are the components of {{math|'''F'''}} with respect to the local '''unnormalized''' [[Curvilinear_coordinates#Covariant and contravariant bases|covariant basis]] (sometimes written as &lt;math&gt;\mathbf{e}_i  = \partial\mathbf{x} / \partial x^i&lt;/math&gt;). The Einstein notation implies summation over {{math|''i''}}, since it appears as both an upper and lower index.

The volume coefficient &lt;math&gt;\rho&lt;/math&gt; is a function of position which depends on the coordinate system. In Cartesian, cylindrical and spherical coordinates, using the same conventions as before, we have &lt;math&gt;\rho=1&lt;/math&gt;, &lt;math&gt;\rho=r&lt;/math&gt; and &lt;math&gt;\rho=r^2\sin{\theta}&lt;/math&gt;, respectively. It can also be expressed as &lt;math&gt;\rho=\sqrt{\operatorname{det}g_{ab}}&lt;/math&gt;, where &lt;math&gt;g_{ab}&lt;/math&gt; is the [[metric tensor]]. Since the determinant is a scalar quantity which doesn't depend on the indices, we can suppress them and simply write &lt;math&gt;\rho=\sqrt{\operatorname{det}g}&lt;/math&gt;. Another expression comes from computing the determinant of the Jacobian for transforming from Cartesian coordinates, which for {{math|1=''n'' = 3}} gives &lt;math&gt;\rho=\left |\frac{\partial(x,y,z)}{\partial (x^1,x^2,x^3)}\right|.&lt;/math&gt;

Some conventions expect all local basis elements to be normalized to unit length, as was done in the previous sections. If we write &lt;math&gt;\hat{\mathbf{e}}_i&lt;/math&gt; for the normalized basis, and &lt;math&gt;\hat{F}^i&lt;/math&gt; for the components of {{math|'''F'''}} with respect to it, we have that 
:&lt;math&gt;\mathbf{F}=F^i \mathbf{e}_i =
F^i {\lVert{\mathbf{e}_i }\rVert } \frac{\mathbf{e}_i}{\lVert{\mathbf{e}_i }\rVert} =
F^i {\sqrt{g_{ii}}} \, \hat{\mathbf{e}}_i =
\hat{F}^i \hat{\mathbf{e}}_i,&lt;/math&gt;
using one of the properties of the metric tensor. By dotting both sides of the last equality with the contravariant element &lt;math&gt;\hat{\mathbf{e}}^i&lt;/math&gt;, we can conclude that &lt;math&gt;F^i = \hat{F}^i / \sqrt{g_{ii}}&lt;/math&gt;. After substituting, the formula becomes:

:&lt;math&gt;\operatorname{div}(\mathbf{F}) = \frac1{\rho} \frac{\partial \left(\frac{\rho}{\sqrt{g_{ii}}}\hat{F}^i\right)}{\partial x^i} =
 \frac1{\sqrt{\operatorname{det}g}} \frac{\partial \left(\sqrt{\frac{\operatorname{det}g}{g_{ii}}}\,\hat{F}^i\right)}{\partial x^i}
&lt;/math&gt;.

See ''{{section link||Generalizations}}'' for further discussion.

== Properties ==
{{main|Vector calculus identities}}

The following properties can all be derived from the ordinary differentiation rules of [[calculus]]. Most importantly, the divergence is a [[linear operator]], i.e.,

:&lt;math&gt;\operatorname{div}( a\mathbf{F} + b\mathbf{G} ) = a \operatorname{div} \mathbf{F} + b \operatorname{div} \mathbf{G}&lt;/math&gt;

for all vector fields {{math|'''F'''}} and {{math|'''G'''}} and all [[real number]]s {{math|''a''}} and {{math|''b''}}.

There is a [[product rule]] of the following type: if {{mvar|φ}} is a scalar-valued function and {{math|'''F'''}} is a vector field, then

:&lt;math&gt;\operatorname{div}(\varphi \mathbf{F}) = \operatorname{grad} \varphi \cdot \mathbf{F} + \varphi \operatorname{div} \mathbf{F},&lt;/math&gt;

or in more suggestive notation

:&lt;math&gt;\nabla\cdot(\varphi \mathbf{F}) = (\nabla\varphi) \cdot \mathbf{F} + \varphi (\nabla\cdot\mathbf{F}).&lt;/math&gt;

Another product rule for the [[cross product]] of two vector fields {{math|'''F'''}} and {{math|'''G'''}} in three dimensions involves the [[Curl (mathematics)|curl]] and reads as follows:

:&lt;math&gt;\operatorname{div}(\mathbf{F}\times\mathbf{G}) = \operatorname{curl} \mathbf{F} \cdot\mathbf{G} - \mathbf{F} \cdot \operatorname{curl} \mathbf{G},&lt;/math&gt;

or

:&lt;math&gt;\nabla\cdot(\mathbf{F}\times\mathbf{G}) = (\nabla\times\mathbf{F})\cdot\mathbf{G} - \mathbf{F}\cdot(\nabla\times\mathbf{G}).&lt;/math&gt;

The [[Laplacian]] of a [[scalar field]] is the divergence of the field's [[gradient]]:
:&lt;math&gt;\operatorname{div}(\nabla\varphi) = \Delta\varphi.&lt;/math&gt;

The divergence of the [[Curl (mathematics)|curl]] of any vector field (in three dimensions) is equal to zero: 
:&lt;math&gt;\nabla\cdot(\nabla\times\mathbf{F})=0.&lt;/math&gt;

If a vector field {{math|'''F'''}} with zero divergence is defined on a ball in {{math|'''R'''&lt;sup&gt;3&lt;/sup&gt;}}, then there exists some vector field {{math|'''G'''}} on the ball with {{math|'''F''' {{=}} curl '''G'''}}. For regions in {{math|'''R'''&lt;sup&gt;3&lt;/sup&gt;}} more topologically complicated than this, the latter statement might be false (see [[Poincaré lemma]]). The degree of ''failure'' of the truth of the statement, measured by the [[homology (mathematics)|homology]] of the [[chain complex]]

:&lt;math&gt;\{ \text{scalar fields on } U \} ~ \overset{\operatorname{grad}}{\rarr} ~ \{ \text{vector fields on } U \} ~ \overset{\operatorname{curl}}{\rarr} ~ \{ \text{vector fields on } U \} ~ \overset{\operatorname{div}}{\rarr} ~ \{ \text{scalar fields on } U \}&lt;/math&gt;

serves as a nice quantification of the complicatedness of the underlying region {{math|''U''}}. These are the beginnings and main motivations of [[de Rham cohomology]].


== Decomposition theorem==
{{main|Helmholtz decomposition}}
It can be shown that any stationary flux {{math|'''v'''('''r''')}} that is at least twice continuously differentiable in {{math|'''R'''&lt;sup&gt;3&lt;/sup&gt;}} and vanishes sufficiently fast for {{math|{{abs|'''r'''}} → ∞}} can be decomposed into an ''irrotational part'' {{math|'''E'''('''r''')}} and a ''source-free part'' {{math|'''B'''('''r''')}}. Moreover, these parts are explicitly determined by the respective ''source densities'' (see above) and ''circulation densities'' (see the article [[Curl (mathematics)|Curl]]):

For the irrotational part one has

:&lt;math&gt;\mathbf E=-\nabla \Phi(\mathbf r),&lt;/math&gt;
with
:&lt;math&gt;\Phi (\mathbf{r})=\int_{\mathbb R^3}\,d^3\mathbf r'\;\frac{\operatorname{div} \mathbf{v}(\mathbf{r}')}{4\pi\left|\mathbf{r}-\mathbf{r}'\right|}.&lt;/math&gt;

The source-free part, {{math|'''B'''}}, can be similarly written: one only has to replace the ''scalar potential'' {{math|Φ('''r''')}} by a ''vector potential'' {{math|'''A'''('''r''')}} and the terms {{math|−∇Φ}} by {{math|+∇ × '''A'''}}, and the source density {{math|div '''v'''}}
by the circulation density {{math|∇ × '''v'''}}.

This &quot;decomposition theorem&quot; is a by-product of the stationary case of [[electrodynamics]]. It is a special case of the more general [[Helmholtz decomposition]] which works in dimensions greater than three as well.


==Relation with the exterior derivative==
One can express the divergence as a particular case of the exterior derivative, which takes a 2-form to a 3-form in {{math|'''R'''&lt;sup&gt;3&lt;/sup&gt;}}. Define the current two-form as
:&lt;math&gt;j = F_1 \, dy \wedge dz + F_2 \, dz \wedge dx + F_3 \, dx \wedge dy .&lt;/math&gt;
It measures the amount of &quot;stuff&quot; flowing through a surface per unit time in a &quot;stuff fluid&quot; of density {{math|''ρ'' {{=}} 1 ''dx'' ∧ ''dy'' ∧ ''dz''}} moving with local velocity {{math|'''F'''}}. Its [[exterior derivative]] {{math|''dj''}} is then given by
:&lt;math&gt;dj = \left( \frac{\partial F_1}{\partial x} +\frac{\partial F_2}{\partial y} +\frac{\partial F_3}{\partial z} \right) dx \wedge dy \wedge dz = ( \nabla \cdot {\mathbf F} ) \rho .&lt;/math&gt;

Thus, the divergence of the vector field {{math|'''F'''}} can be expressed as:
:&lt;math&gt;\nabla \cdot {\mathbf F} = {\star} d{\star} \big( {\mathbf F}^\flat \big) .&lt;/math&gt;
Here the superscript {{music|flat}} is one of the two [[musical isomorphism]]s, and {{math|⋆}} is the [[Hodge star operator]]. Working with the current two-form and the exterior derivative is usually easier than working with the vector field and divergence, because unlike the divergence, the exterior derivative commutes with a change of (curvilinear) coordinate system.

==Generalizations==

The divergence of a vector field can be defined in any number of dimensions. If 
:&lt;math&gt;\mathbf{F} = ( F_1 , F_2 , \ldots F_n ) ,&lt;/math&gt;

in a Euclidean coordinate system with coordinates {{math|''x''&lt;sub&gt;1&lt;/sub&gt;, ''x''&lt;sub&gt;2&lt;/sub&gt;, ..., ''x''&lt;sub&gt;''n''&lt;/sub&gt;}}, define

:&lt;math&gt;\operatorname{div} \mathbf{F} = \nabla\cdot\mathbf{F} = \frac{\partial F_1}{\partial x_1} + \frac{\partial F_2}{\partial x_2} + \cdots + \frac{\partial F_n}{\partial x_n}.&lt;/math&gt;
The appropriate expression is more complicated in [[Curvilinear coordinates#Grad, curl, div, Laplacian|curvilinear coordinates]].

In the case of one dimension, {{math|'''F'''}} reduces to a regular function, and the divergence reduces to the derivative.

For any {{math|''n''}}, the divergence is a linear operator, and it satisfies the &quot;product rule&quot;

:&lt;math&gt;\nabla\cdot(\varphi \mathbf{F}) = (\nabla\varphi) \cdot \mathbf{F} + \varphi (\nabla\cdot\mathbf{F})&lt;/math&gt;

for any scalar-valued function {{mvar|φ}}.

The divergence of a vector field extends naturally to any [[differentiable manifold]] of dimension {{math|''n''}} that has a [[volume form]] (or [[density on a manifold|density]]) {{mvar|μ}}, e.g. a [[Riemannian manifold|Riemannian]] or [[Lorentzian manifold]]. Generalising the construction of a two-form for a vector field on {{math|'''R'''&lt;sup&gt;3&lt;/sup&gt;}}, on such a manifold a vector field {{math|''X''}} defines an {{math|(''n'' − 1)}}-form {{math|''j'' {{=}} ''i&lt;sub&gt;X&lt;/sub&gt;&amp;thinsp;μ''}} obtained by contracting {{math|''X''}} with {{mvar|μ}}. The divergence is then the function defined by

:&lt;math&gt;dj = ( \operatorname{div} X ) \mu .&lt;/math&gt;

Standard formulas for the [[Lie derivative]] allow us to reformulate this as

:&lt;math&gt;{\mathcal L}_X \mu = ( \operatorname{div} X ) \mu .&lt;/math&gt;

This means that the divergence measures the rate of expansion of a volume element as we let it flow with the vector field.

On a [[pseudo-Riemannian manifold]], the divergence with respect to the metric volume form can be computed in terms of the [[Levi-Civita connection]] {{math|∇}}:

:&lt;math&gt;\operatorname{div} X = \nabla \cdot X = {X^a}_{;a} ,&lt;/math&gt;

where the second expression is the contraction of the vector field valued 1-form {{math|∇''X''}} with itself and the last expression is the traditional coordinate expression from [[Ricci calculus]].

An equivalent expression without using connection is

:&lt;math&gt;\operatorname{div}(X) = \frac{1}{\sqrt{\operatorname{det} g}} \partial_a \left(\sqrt{\operatorname{det} g} \, X^a\right),&lt;/math&gt;

where {{mvar|g}} is the metric and {{math|∂{{sub|''a''}}}} denotes the partial derivative with respect to coordinate {{math|''x''{{i sup|''a''}}}}.

Divergence can also be generalised to [[tensors]]. In [[Einstein notation]], the divergence of a [[contravariant vector]] {{mvar|F{{isup|μ}}}} is given by

:&lt;math&gt;\nabla \cdot \mathbf{F} = \nabla_\mu F^\mu ,&lt;/math&gt;

where {{math|∇&lt;sub&gt;''μ''&lt;/sub&gt;}} denotes the [[covariant derivative]].

Equivalently, some authors define the divergence of a [[mixed tensor]] by using the [[musical isomorphism]] {{music|sharp}}: if {{math|''T''}} is a {{math|(''p'', ''q'')}}-[[tensor]] ({{math|''p''}} for the contravariant vector and {{math|''q''}} for the covariant one), then we define the ''divergence of {{mvar|T}}'' to be the {{math|(''p'', ''q'' − 1)}}-tensor

:&lt;math&gt;( \operatorname{div} T ) ( Y_1 , \ldots , Y_{q-1}) = {\operatorname{trace}} \Big( X \mapsto \sharp ( \nabla T ) ( X , \cdot , Y_1 , \ldots , Y_{q-1} ) \Big);&lt;/math&gt;

that is, we take the trace over the ''first two'' covariant indices of the covariant derivative{{efn| The choice of &quot;first&quot; covariant index of a tensor is intrinsic and depends on the ordering of the terms of the Cartesian product of vector spaces on which the tensor is given as a multilinear map {{math|V × V × ... × V → '''R'''}}. But equally well defined choices for the divergence could be made by using other indices. Consequently, it is more natural to specify the divergence of {{math|''T''}} with respect to a specified index. There are however two important special cases where this choice is essentially irrelevant: with a totally symmetric contravariant tensor, when every choice is equivalent, and with a totally antisymmetric contravariant tensor ({{aka}} a ''k''-vector), when the choice affects only the sign.}}

{{Calculus|Vector}}

==See also==
*[[Curl (mathematics)|Curl]]
*[[Del in cylindrical and spherical coordinates]]
*[[Divergence theorem]]
*[[Gradient]]

==Notes==
{{notelist}}

==Citations==
{{reflist|30em}}

==References==
* {{Cite web|ref=harv|url=http://musr.phas.ubc.ca/~jess/hr/skept/Gradient/node4.html|title=DIVERGENCE of a Vector Field|last=Brewer|first=Jess H.|date=1999|website=musr.phas.ubc.ca|access-date=2016-08-09|archive-url=https://web.archive.org/web/20071123122937/http://musr.phas.ubc.ca/~jess/hr/skept/Gradient/node4.html|archive-date=2007-11-23|url-status=dead}}
* {{cite book|ref=harv |last=Rudin|first=Walter |title=Principles of mathematical analysis|url=https://archive.org/details/principlesofmath00rudi |url-access=registration |publisher=McGraw-Hill|year=1976|isbn=0-07-054235-X |location= |via= }}
* {{cite book|ref=harv |last=Edwards|first=C. H. |year=1994 |title=Advanced Calculus of Several Variables |publisher=Dover |isbn=0-486-68336-2 |location=Mineola, NY |via=}}
* {{cite book|ref=harv |last=Gurtin|first=Morton |year=1981 |title=An Introduction to Continuum Mechanics |publisher=Academic Press |isbn=0-12-309750-9 |location= |via= }}
* {{cite book|ref=harv |last1=Theresa|first1=M. Korn |last2=Korn|first2=Granino Arthur |year= |title=Mathematical Handbook for Scientists and Engineers: Definitions, Theorems, and Formulas for Reference and Review |publisher=Dover Publications |location=New York |pages=157–160 |isbn=0-486-41147-8 |oclc= |doi= }}

== External links ==
{{commons category}}
* {{springer|title=Divergence|id=p/d033600}}
* [http://mathinsight.org/divergence_idea The idea of divergence of a vector field]
* [https://web.archive.org/web/20110916111844/http://www.khanacademy.org/video/divergence-1?playlist=Calculus Khan Academy: Divergence video lesson]
* {{cite web |first=Grant |last=Sanderson |date=June 21, 2018 |title=Divergence and curl: The language of Maxwell's equations, fluid flow, and more |work=[[3Blue1Brown]] |url=https://www.youtube.com/watch?v=rB83DpBJQsE |via=[[YouTube]] }}

[[Category:Differential operators]]
[[Category:Linear operators in calculus]]
[[Category:Vector calculus]]</text>
      <sha1>avnj3rox06un5y0zmatuoaeq00xi9i7</sha1>
    </revision>
  </page>
