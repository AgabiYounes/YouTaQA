  <page>
    <title>Applesoft BASIC</title>
    <ns>0</ns>
    <id>2100</id>
    <revision>
      <id>927212193</id>
      <parentid>927211648</parentid>
      <timestamp>2019-11-21T01:38:49Z</timestamp>
      <contributor>
        <ip>2601:545:8201:6290:31E4:D2AB:72D7:C388</ip>
      </contributor>
      <comment>/* Limitations */ The variable name SCORE is not wholly interpreted &quot;as&quot; the operator OR, but as containing it</comment>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text xml:space="preserve">{{Infobox software
| name                   = Applesoft BASIC
| logo                   = &lt;!-- Image name is enough --&gt;
| logo alt               = 
| screenshot             = &lt;!-- Image name is enough --&gt;
| caption                = 
| screenshot alt         = 
| collapsible            = 
| author                 = [[Marc McDonald]]&lt;br&gt;[[Ric Weiland]]
| developer              = 
| released               = {{Start date and age|1977}}
| discontinued           = 
| latest release version = Applesoft II
| latest release date    = {{Start date and age|1978}}
| latest preview version = 
| latest preview date    = &lt;!-- {{Start date and age|YYYY|MM|DD|df=yes/no}} --&gt;
| programming language   = 
| operating system       = [[Apple II series]]
| platform               = 
| size                   = 
| language               = 
| language count         = &lt;!-- Number only --&gt;
| language footnote      = 
| genre                  = [[Microsoft BASIC]]
| license                = 
| alexa                  = 
| website                = &lt;!--{{URL|example.org}}--&gt;
| standard               = 
| AsOf                   = 
}}
'''Applesoft BASIC''' is a dialect of [[Microsoft BASIC]], developed by [[Marc McDonald]] and [[Ric Weiland]],  supplied with the [[Apple II series]] of computers. It supersedes [[Integer BASIC]] and is the BASIC in [[Read-only memory|ROM]] in all Apple II series computers after the original [[Apple II#Apple II|Apple II]] model. It is also referred to as '''FP BASIC''' (from &quot;[[floating point]]&quot;) because of the [[Apple DOS]] command used to invoke it, instead of &lt;code&gt;INT&lt;/code&gt; for Integer BASIC.

Applesoft BASIC was supplied by [[Microsoft]] and its name is derived from the names of both [[Apple Inc.|Apple]] and [[Microsoft]]. Apple employees, including [[Randy Wigginton]], adapted Microsoft's interpreter for the Apple II and added several features. The first version of Applesoft was released in 1977 on [[cassette tape]] and lacked proper support for high-resolution graphics. '''Applesoft II''', which was made available on cassette and disk and in the ROM of the [[Apple II Plus]] and subsequent models, was released in 1978. It is this latter version, which has some syntax differences and support for the Apple II high-resolution graphics modes, that is usually synonymous with the term &quot;Applesoft.&quot;

An Applesoft compiler, ''TASC (The AppleSoft Compiler)'', was produced by [[Microsoft]] in 1981.&lt;ref&gt;[https://archive.org/details/TASC_The_AppleSoft_Compiler_Manual/page/n1 TASC (The AppleSoft Compiler) Manual, 1981]&lt;/ref&gt;

==History==
When [[Steve Wozniak]] wrote [[Integer BASIC]] for the [[Apple II]], he did not implement support for [[floating point]] math because he was primarily interested in writing games, a task for which integers alone were sufficient.&lt;ref name=&quot;wozniak20140501&quot;&gt;{{cite web | url=https://gizmodo.com/how-steve-wozniak-wrote-basic-for-the-original-apple-fr-1570573636 | title=How Steve Wozniak Wrote BASIC for the Original Apple From Scratch | website=Gizmodo | date=2014-05-01 | accessdate=2 May 2014 | author=Wozniak, Steve}}&lt;/ref&gt; In 1976, Microsoft had developed [[Microsoft BASIC]], a BASIC interpreter for the [[MOS Technology 6502]], but at the time there was no production computer that used it. Upon learning that Apple had a 6502 machine, Microsoft asked if the company were interested in licensing BASIC, but [[Steve Jobs]] replied that Apple already had one.

The Apple II was unveiled to the public at the [[West Coast Computer Faire]] in April 1977 and became available for sale in June. One of the most common customer complaints about the computer was BASIC's lack of floating-point capability.&lt;ref&gt;{{Cite news|url=http://techland.time.com/2012/04/16/apple-ii-forever-a-35th-anniversary-tribute-to-apples-first-iconic-product/|title=Apple II Forever: a 35th-Anniversary Tribute to Apple’s First Iconic Product|last=McCracken|first=Harry|work=Time|access-date=2019-06-21|language=en-US|issn=0040-781X}}&lt;/ref&gt; Integer BASIC is limited to whole numbers between −32768 and 32767 and caused problems for users attempting to write business applications with it. Steve Wozniak had never added floating point capabilities to Integer BASIC as he did not consider them necessary for gaming and educational software, the two primary tasks he envisioned for the Apple II. As Wozniak—the only person who understood Integer BASIC well enough to add floating point features—was busy with the [[Disk II]] drive and controller and with [[Apple DOS]], Apple turned to Microsoft. Making things more problematic was that the rival [[Commodore PET]] personal computer had a floating point-capable BASIC interpreter from the beginning. The Applesoft license also saved Microsoft from near-bankruptcy when they licensed BASIC to Commodore for the PET in an agreement that proved unexpectedly costly for them.

Apple reportedly obtained an eight-year license for Applesoft BASIC from Microsoft for a flat fee of $31,000, renewing it in 1985 through an arrangement that gave Microsoft the rights and source code for Apple's [[MacBASIC|Macintosh version of BASIC]].&lt;ref&gt;Herzfeld, Andy &quot;MacBasic – The Sad Story of MacBasic&quot;. http://www.folklore.org/StoryView.py?project=Macintosh&amp;story=MacBasic.txt . Folklore.org. 2014 February 12&lt;/ref&gt; Applesoft was designed to be backwards-compatible with Integer BASIC and uses the core of Microsoft's 6502 BASIC implementation, which includes using the GET command for detecting key presses and not requiring any spaces on program lines. While Applesoft BASIC is slower than Integer BASIC, it has many features that the older BASIC lacks:
* Atomic strings: A string is no longer an array of characters (as in Integer BASIC and [[C (programming language)|C]]); it is instead a [[garbage collection (computer science)|garbage-collected]] object (as in [[Scheme (programming language)|Scheme]] and [[Java (programming language)|Java]]). This allows for string arrays; {{code|DIM A$(10)|basic}} resulted in a [[Array data type|vector]] of ''eleven'' string variables numbered 0–10.
* Multidimensional [[Array data type|arrays]] (numbers or strings)
* Single-precision [[floating point]] variables with an 8-bit exponent and a 31-bit significand and improved math capabilities, including trigonometry and logarithmic functions
* Commands for high-resolution graphics
* &lt;code&gt;DATA&lt;/code&gt; statements, with &lt;code&gt;READ&lt;/code&gt; and &lt;code&gt;RESTORE&lt;/code&gt; commands, for representing numerical and string values in quantity
* &lt;code&gt;CHR$&lt;/code&gt;, &lt;code&gt;STR$&lt;/code&gt;, and &lt;code&gt;VAL&lt;/code&gt; functions for converting between string and numeric types (both languages did have the &lt;code&gt;ASC&lt;/code&gt; function)
* [[User-defined function]]s: simple one-line functions written in BASIC, with a single parameter
* Error-trapping, allowing BASIC programs to handle unexpected errors by means of a subroutine written in BASIC
Conversely, Applesoft lacks the &lt;code&gt;MOD&lt;/code&gt; (remainder) operator that had been present in Integer BASIC.

Adapting BASIC for the Apple II was a tedious job as Apple received a source listing for Microsoft 6502 BASIC which proved to be buggy{{citation needed|date=March 2017}} and also required the addition of Integer BASIC commands. Since Apple had no 6502 assembler on hand, the development team was forced to send the source code over the phone lines to Call Computer, an outfit that offered compiler services. This was an extremely tedious, slow process and after Call Computer lost the source code due to an equipment malfunction, one of the programmers, Cliff Huston, used his own IMSAI 8080 computer to [[cross assembler|cross assemble]] the BASIC source.&lt;ref&gt;{{cite web|url=http://apple2history.org/history/ah16/|title=History of the Apple II - Chapter 16 - Languages|accessdate=July 6, 2016}}&lt;/ref&gt;

==Features==
Applesoft is similar to Commodore's BASIC 2.0 aside from features inherited from Integer BASIC. There are a few minor differences such as Applesoft's lack of bitwise operators; otherwise most BASIC programs that do not utilize hardware-dependent features will run on both BASICs.

The PR# statement is used to redirect output to an expansion card, and IN# is used to redirect input from an expansion card. The slot number of the card is specified after the PR# or IN# within the statement. The computer will lock up if there is no card present in the slot and require a reboot. PR#0 will restore output to the 40 column screen and IN#0 to the keyboard.

The PR# statement can be used to redirect output to the printer (e.g. {{code|2=basic|10 PR#x:PRINT&quot;Hello!&quot;}}) where x is the slot number containing the printer port card. To send a BASIC program listing to the printer, the user would type {{code|PR#x:LIST}}. After outputting to the printer, it is necessary to execute a PR#0 statement to reset output to the screen.

PR#6 will cause Applesoft to boot the disk drives (although the Disk II controller can be in any slot, it is usually in slot 6). PR#3 will switch to 80 column text mode if an 80 column card is present. 80 column cards also add 12 new control codes that can be generated with the CHR$ function. Enhanced Apple IIe and IIc models with the MouseText character set include another two control codes to enable and disable the feature.

As with Commodore BASIC, numeric variables are stored as 40-bit floating point; each variable requires five bytes of memory. The programmer may designate variables as integer by following them with a percent sign, in which case they use two bytes and are limited to a range of -32768 to 32767; however BASIC internally converts them back to floating point, while each percent sign also takes an additional byte of program code, so in practice this feature is only useful for reducing the memory usage of large array variables.

The RND function generates a [[pseudorandom number generator|pseudorandom]] fractional number between 0 and 1. {{code|RND(0)}} returns the most recently generated random number. RND with a negative number will jump to a point in the sequence determined by the particular negative number used. RND with any positive value will generate a new random number from the sequence, not dependent on the actual value given. Random numbers are generated via a formula based on the previously generated value, and thus are not truly random. Locations $4E and $4F, which the system cycles the values of continuously while waiting for user keystrokes, can be PEEKed to provide truly random values to use as a seed (when negated) for RND.

Like other implementations of Microsoft BASIC, Applesoft discards spaces (outside of strings and comments) on program lines. &lt;code&gt;LIST&lt;/code&gt; adds spaces when displaying code for the sake of readability. Since the LIST code will add a space before AND after every tokenized keyword, it often produces two spaces in a row where one would suffice for readability.

The default prompt for &lt;code&gt;INPUT&lt;/code&gt; is a question mark. &lt;code&gt;PRINT&lt;/code&gt; does not add a leading space in front of numbers.

[[Coleco]] claimed that its [[Coleco Adam|Adam]] home computer's SmartBASIC was source-code compatible with Applesoft.&lt;ref name=&quot;coleco19830928&quot;&gt;{{Cite AV media |url=https://www.youtube.com/watch?v=gg_I9TGYM-w |title=Coleco Presents The Adam Computer System |date=2016-05-03 |publisher=YouTube |orig-year=1983-09-28 |time=31:55 |quote=Everybody who knows Applesoft BASIC will also know Adam SmartBASIC. All the same commands, all the same controls for this BASIC, this interpreter, are available. In fact, we're going to show you a program which uses Applesoft graphic commands ... executed through Adam. ... As far as we're concerned, when we're in BASIC, and we're not PEEKing or POKEing ... anything below the BASIC interpreter, we are source-code compatible.}}&lt;/ref&gt; Microsoft licensed a BASIC compatible with Applesoft to [[VTech]] for its [[Laser 128]] [[Apple II clone|clone]].&lt;ref name=&quot;grevstad198612&quot;&gt;{{cite news | url=https://archive.org/stream/inCider_86-12#page/n59/mode/2up | title=Laser 128 / An Affordable Compatible | work=inCider | date=December 1986 | accessdate= 2017-04-24 | author=Grevstad, Eric | pages=58}}&lt;/ref&gt;

===Limitations===
Through several early models of the Apple II, Applesoft BASIC did not support the use of [[lowercase]] letters in programs, except in strings. &lt;code&gt;PRINT&lt;/code&gt; is a valid command but &lt;code&gt;print&lt;/code&gt; and &lt;code&gt;Print&lt;/code&gt; result in a syntax error.

Applesoft lacks several commands and functions common to most of the non-6502 Microsoft BASIC interpreters, such as:
* &lt;code&gt;INSTR&lt;/code&gt; (search for a substring in a string)
* &lt;code&gt;PRINT USING&lt;/code&gt; (format numbers in printed output)
* &lt;code&gt;INKEY$&lt;/code&gt; (check for a keypress without stopping the program; although a PEEK to location $C000 achieves this action)
* &lt;code&gt;LPRINT&lt;/code&gt; (output to a printer instead of the screen)

Applesoft does not come with any built-in commands for file or disk handling, other than a way to save programs to, and load programs from, cassette tape. The Apple II disk operating system, known simply as DOS, augments the language to provide such abilities.

Applesoft BASIC variable names are significant only to two letters. They can be made longer, but only the first two letters are used. For instance, &quot;LOW&quot; and &quot;LOSS&quot; are treated as the same variable, and attempting to assign a value to &quot;LOSS&quot; overwrites any value assigned to &quot;LOW&quot;. Because the language uses [[Tokenization (lexical analysis)|tokenization]], a programmer has to avoid consecutive letters that are also Applesoft commands or operations. The name &quot;SCORE&quot; for a variable is interpreted as containing the &lt;code&gt;OR&lt;/code&gt; Boolean operator, rendered as &lt;code&gt;SC OR E&lt;/code&gt;. &quot;BACKGROUND&quot; contains &lt;code&gt;GR&lt;/code&gt;, the command to invoke the low-resolution graphics mode, and results in a syntax error.

===Sound and graphics===
The only sound support is the option to &lt;code&gt;PRINT&lt;/code&gt; an ASCII [[bell character]] to sound the system alert [[beep (sound)|beep]], and a &lt;code&gt;[[PEEK and POKE|PEEK]]&lt;/code&gt; command to click the speaker. The language is not fast enough to produce more than a baritone buzz from repeated clicks. Programs can, however, store a machine-language routine to be called to generate electronic musical tones spanning several octaves.

Applesoft supports the Apple II lores graphics display, where 40 color &quot;blocks&quot; horizontally, and up to 48 blocks vertically, can be displayed in 16 colors, with commands to plot individual blocks and horizontal or vertical lines; as well as the hires mode, where six colors (a fixed subset of the lores palette of 16 colors) can be displayed in a resolution of 280 horizontally by 192 vertically (with some limitations on horizontal placement), with a command to draw points or any diagonal lines onscreen. Beginning with the Apple IIe, a new &quot;double-high resolution&quot; mode, based on a mode introduced on the [[Apple III]] computer, became available on machines with 128k of memory. This mode essentially duplicates the resolution of the original hires mode, but including all 16 colors of the lores palette. Applesoft, however, does not provide support for this mode, and must rely on supplemental machine-language routines in order to utilize it. Additional new graphics modes on the [[Apple IIgs]] are likewise not supported.

No provision exists for mixing text and graphics, except for the limited &quot;hardware split screen&quot; of the Apple II (four lines of text at the bottom of the screen).

Vector-based [[shape table]]s can be used to draw objects in hires graphics, but are slow in comparison to routines that draw bitmaps directly. They also only support the defining of horizontal and vertical lines. Diagonals and curves are not supported, although shapes can be drawn rotated to various angles, so that lines ostensibly defined as horizontal or vertical will appear diagonal. In addition, shapes can be drawn scaled up to larger sizes.

===Extensions===
Applesoft BASIC can be extended by two means: the ampersand (&amp;amp;) command and the USR() function. These are two features that call low-level machine-language routines stored in memory, which is useful for routines that need to be fast or require direct access to arbitrary functions or data in memory. The USR() function takes one numerical argument, and can be programmed to derive and return a calculated function value, to be used in a numerical expression. &quot;&amp;&quot; is effectively a shorthand for CALL, with an address that is predefined.

===Bugs===
A deficiency in Applesoft's error-trapping with ONERR means that the system stack would not be reset if an error-handling routine did not invoke RESUME, potentially leading to a crash. Error-handling that does not employ RESUME can avoid the problem with a CALL -3288 or (equivalent) 62248 before exiting the routine.&lt;ref name=&quot;ManualIIe&quot;&gt;Applesoft BASIC Programmer's Reference Manual (for IIe only), Apple Computer, Inc., 1982&lt;/ref&gt;

===Performance===
Wozniak originally referred to his Integer BASIC as &quot;Game BASIC&quot; (having written it so he could implement a [[Breakout clone|''Breakout'' clone]] for his new computer).&lt;ref name=&quot;wozniak20140501&quot; /&gt; Few [[action game]]s were written in Applesoft BASIC, in large part because the use of floating-point numbers for all math operations degrades performance.

Applesoft BASIC programs are stored as a [[linked list]] of lines; a &lt;code&gt;GOTO&lt;/code&gt; or &lt;code&gt;GOSUB&lt;/code&gt; takes [[Computational complexity theory|linear time]]. Some programs had the subroutines at the top to reduce the time for calling them.

Unlike what Integer BASIC does, Applesoft BASIC does not convert literal numbers in the source code into the internal binary format at the time the source line is entered; rather, the string of digits is stored as entered and the relatively slow conversion happens at runtime whenever the line is executed. Since variable lookup is often faster than this conversion, it is generally faster to store numeric constants that are used inside loops in variables, before the loop is entered.

==Sample code==
[[File:Applesoft BASIC.png|thumb|[[Hello World]], with [[inverse video]] and [[bell character]], run then listed]]
[[Hello World]] in Applesoft BASIC can be entered as the following:
&lt;source lang=&quot;basic&quot;&gt;
 10TEXT:HOME
 20?&quot;HELLO WORLD&quot;
&lt;/source&gt;
Multiple commands can be included on the same line of code if separated by a colon (&lt;code&gt;:&lt;/code&gt;). The &lt;code&gt;?&lt;/code&gt; can be used in Applesoft BASIC (and almost all versions of Microsoft BASIC) as a shortcut for &quot;PRINT&quot;, though spelling out the word is not only acceptable but canonical—Applesoft converted &quot;?&quot; in entered programs to the same token as &quot;PRINT&quot; (thus no memory is actually saved by using &quot;?&quot;), thus either appears as &quot;PRINT&quot; when a program is listed. The program above appears in a &lt;code&gt;LIST&lt;/code&gt; command as:
&lt;source lang=&quot;basic&quot;&gt;
 10  TEXT : HOME
 20  PRINT &quot;HELLO WORLD&quot;
&lt;/source&gt;
&lt;ref&gt;This article includes text from [http://everything2.com/?node=Applesoft+BASIC Everything2], licensed under GFDL.&lt;/ref&gt;

When Applesoft II BASIC was initially released in mid-1978, it came on cassette tape and could be loaded into memory via the Apple II's machine language monitor. When the enhanced Apple II+ replaced the original II in 1979, Applesoft was now included in ROM and automatically started on power-up if no bootable floppy disk was present. Conversely, Integer BASIC was now removed from ROM and turned into an executable file on the DOS 3.3 disk.

==Early evolution==
The original Applesoft, stored in RAM as documented in its Reference Manual of November 1977, has smaller interpreter code than the later Applesoft II, occupying 8½ kb of memory,&lt;ref&gt;Applesoft Extended Precision Floating Point Basic Language Reference Manual, Apple Computer, Inc., November 1977&lt;/ref&gt; instead of the 10 kb used by the later Applesoft II. Consequently, it lacks a number of command features developed for the later, mainstream version:
* All commands supporting Apple's &quot;high resolution&quot; graphics (9 total)
* Error-trapping with ONERR...GOTO and RESUME
* Machine-routine shorthand call &quot;&amp;&quot;
* Screen-clearing HOME (a call to a system ROM routine)
* Text-output control NORMAL, INVERSE, FLASH and SPEED=
* The print-space function SPC() is listed among reserved words in the manual, but is not otherwise documented (the TAB() print-function ''is'' documented)
* Cassette tape storage of numerical arrays: STORE and RECALL
* Device response: WAIT
as well as several the later version would have, that had already been present in Apple's Integer BASIC:
* Program-line deletion: DEL
* Machine-routine access: CALL
* Peripheral device access: IN# and PR# (although IN without &quot;#&quot; is listed among reserved words)
* Memory range control: HIMEM: and LOMEM:
* Execution tracking for debugging: TRACE and NOTRACE
* Screen-positioning: HTAB and VTAB
* Subroutine aborting POP
* Functions PDL() to read the analog controllers, and SCRN() to read the low-resolution graphics screen (both accessing system ROM routines)
In addition, its low-resolution graphics commands have different names from their Integer BASIC/Applesoft II counterparts. All command names are of the form PLTx such that GR, COLOR=, PLOT, HLIN and VLIN are called PLTG, PLTC, PLTP, PLTH, and PLTV, respectively. The command for returning to text mode, known as TEXT in other versions, is simply TEX, and carries the proviso that it has to be the last statement in a program line.

Applesoft BASIC 1.x was closer to Microsoft's original 6502 BASIC code than the later Applesoft II; it retained the Memory Size? prompt and displayed a Microsoft copyright notice. To maintain consistency with Integer BASIC, the &quot;Ok&quot; prompt from Microsoft's code was replaced by a ] character. Applesoft 1.x also prompted the user upon loading if he wished to disable the REM statement and the LET keyword in assignment statements in exchange for lores graphics commands.

The USR() function is also defined differently, serving as a stand-in for the absent CALL command. Its argument is not for passing a numerical value to the machine-language routine, but is instead the call-address of the routine itself; there is no &quot;hook&quot; to pre-define the address. All of several examples in the manual use the function only to access &quot;system monitor ROM&quot; routines, or short user-routines to manipulate the ROM routines. No mention is made of any code to calculate the value returned by the function itself; the function is always shown being assigned to &quot;dummy&quot; variables, which, without action to set a value by user-code, just receive a meaningless value handed back to them. Even accessed ROM routines that return values (in examples, those that provide the service of PDL() and SCRN() functions) merely have their values stored, by user-routines, in locations that are separately PEEKed in a subsequent statement.

Unlike in Integer BASIC and Applesoft II, the Boolean operators AND, OR and NOT perform [[bitwise operation]]s on 16-bit integer values. If they are given values outside that range, an error results.

The terms OUT and PLT (and the aforementioned IN) appear in the list of reserved words, but are not explained anywhere in the manual.

== See also ==
* [[ALF Products#FTL|ALF's Formula Transfer Link]], speed enhancement for Applesoft BASIC
* [[Chinese BASIC]], a Chinese-localized version of Applesoft BASIC
* [[Apple III#BASIC|Apple III BASIC]]s from Apple and Microsoft

== References ==
{{Reflist}}

== External links ==
* [http://www.txbobsc.com/scsc/scdocumentor/ Disassembled ROM]
* [http://www.calormen.com/jsbasic/ AppleSoft BASIC in JavaScript]

{{BASIC}}

{{DEFAULTSORT:Applesoft Basic}}
[[Category:Apple II software]]
[[Category:BASIC interpreters]]
[[Category:Discontinued Microsoft BASICs]]
[[Category:BASIC programming language family]]</text>
      <sha1>krsydwan4kd0qacph3cyr55jpz6857b</sha1>
    </revision>
  </page>
