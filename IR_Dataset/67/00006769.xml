  <page>
    <title>Commodore 1581</title>
    <ns>0</ns>
    <id>6769</id>
    <revision>
      <id>925946766</id>
      <parentid>916090208</parentid>
      <timestamp>2019-11-13T08:54:35Z</timestamp>
      <contributor>
        <username>InternetArchiveBot</username>
        <id>27015025</id>
      </contributor>
      <comment>Rescuing 1 sources and tagging 0 as dead.) #IABot (v2.0</comment>
      <model>wikitext</model>
      <format>text/x-wiki</format>
      <text xml:space="preserve">{{refimprove|date=February 2013}}

{{Infobox information appliance  &lt;!-- https://en.wikipedia.org/wiki/Template:Infobox_information_appliance --&gt;
| name         = Commodore 1581
| title        = 
| image        = Commodore 1581 01.jpg
| caption      = Commodore 1581
| manufacturer = Commodore Business Machines, Inc.
| type         = Floppy drive
| releasedate  = {{Start date|1987||}}
| price &lt;!--intro--&gt; = USD 399 (1987) USD {{Inflation|US|399|1987|fmt=c|r=-2}} ({{CURRENTYEAR}} equivalent)&lt;ref name=ahoy87&gt;{{Cite web|author= |accessdate=2016-04-02 |date=1987 |publication-date= |title=Commodore users Ahoy (Issue 40 1987 Apr) |pages= |publisher= |url=https://issuu.com/zetmoon/docs/ahoy_issue_40_1987_apr |quote=The Commodore 1581 3.5&quot; Disk Drive ($399) provides C-64, }}&lt;/ref&gt;
| discontinued = 1990&lt;ref name=w81/&gt;
| media        = 3½&quot; [[floppy disk]] [[Floppy disk format#Single Sided, Double Density|DS]]&lt;ref name=w81/&gt; [[Floppy disk format#Single Sided, Double Density|DD]]&lt;ref name=z81/&gt; using [[Modified Frequency Modulation|MFM]]&lt;ref name=dd81/&gt;
| os           = [[Commodore DOS|CBM DOS 10.0]]&lt;ref name=z81/&gt;
| power        = 220 V 50 Hz 10 W&lt;ref name=arc81/&gt;
| cpu          = [[MOS Technology 6502|MOS 6502]] @ {{nowrap|2 MHz}}&lt;!--clock from de.wikipedia --&gt;, [[Western Digital FD1771|WD1770]]&lt;ref name=w81&gt;{{Cite web|author= |accessdate=2016-04-02 |date=2015-03-06 |publication-date= |title=VIC-1581 - C64-Wiki |pages= |publisher= |url=https://www.c64-wiki.com/index.php/VIC-1581 |quote= }}&lt;/ref&gt; or WD1772&lt;ref name=&quot;Lt Kernal - More Information&quot;&gt;{{cite web|title=Lt Kernal - More Information
|date=2007
|url=http://www.floodgap.com/retrobits/ckb/ltk/links.htm}}&lt;/ref&gt;
| memory       = 8 kB RAM 32 kB ROM&lt;ref name=w81/&gt;
| storage      = 800 kB&lt;ref name=z81&gt;{{Cite web |accessdate=2016-04-02 |title=Commodore 1581 Disk Drive : A card disk drive |url=https://www.zimmers.net/cbmpics/d1581.html |archive-url=https://web.archive.org/web/20160406103221/http://www.zimmers.net/cbmpics/d1581.html |archive-date=2016-04-06 |url-status=dead }}&lt;/ref&gt;
|connectivity  = [[Commodore bus|Commodore proprietary serial IEEE-488]]&lt;ref name=arc81&gt;{{Cite web|author= |accessdate=2016-04-02 |date=1987 |publication-date=2013-05-23 |title=Commodore 1581 floppy disk drive |pages= |publisher= |url=https://archive.org/details/Commodore_1581_Disk_Drive_1987-08_Commodore_DE |quote= }}&lt;/ref&gt; burst mode {{nowrap|9000 bytes/s}}&lt;ref&gt;https://www.c64-wiki.de/index.php/VC-1581 VC-1581&lt;/ref&gt;&lt;!--de:Commodore 128 says 8500 bytes/s--&gt;
| dimensions   = 63 x 140 x 230&lt;ref name=arc81/&gt;
| weight       = 1.4 kg&lt;ref name=arc81/&gt;
| compatibility= [[Commodore 64]]
| predecessor  = [[Commodore 1571]]
| successor    = 
| related      = 
}}

The '''Commodore 1581''' is a 3½-inch [[Double-sided disk|double-sided]] [[double density|double-density]] [[floppy disk]] drive that was released by [[Commodore International|Commodore Business Machines (CBM)]] in 1987, primarily for its [[Commodore 64|C64]] and [[Commodore 128|C128]] [[home computer|home]]/[[personal computer]]s. The drive stores 800 [[kilobyte]]s using an [[Modified Frequency Modulation|MFM]] encoding&lt;ref name=dd81&gt;[http://personalpages.tds.net/~rcarlsen/cbm/1581.txt tds.net - 1581 DISK DRIVE DIAGNOSTICS, latest updates and corrections 7-13-05]&lt;/ref&gt; but formats different from the [[MS-DOS]] (720 kB), [[Amiga]] (880 kB), and [[Macintosh Plus|Mac Plus]] (800 kB) formats. With special software it's possible to read C1581 disks on an x86 PC system, and likewise, read MS-DOS and other formats of disks in the C1581 (using Big Blue Reader), provided that the PC or other floppy handles the {{nowrap|&quot;720 kB&quot;}} size format.&lt;ref name=dd81/&gt; This capability was most frequently used to read MS-DOS disks. The drive was released in the summer of 1987 and quickly became popular with [[bulletin board system|bulletin board system (BBS)]] operators and other users.

Like the [[Commodore 1541|1541]] and [[Commodore 1571|1571]], the 1581 has an onboard [[MOS Technology 6502]] CPU with its own ROM and RAM, and uses a serial version of the [[IEEE-488]] interface. Inexplicably, the drive's ROM contains commands for parallel use, although no parallel interface was available. Unlike the 1571, which is nearly 100% backward-compatible with the 1541, the 1581 is only compatible with previous Commodore drives at the DOS level and cannot utilize software that performs low-level disk access (as the vast majority of Commodore 64 games do).

The version of [[Commodore DOS]] built into the 1581 added support for [[Disk partitioning|partitions]], which could also function as fixed-allocation [[Directory (computing)|subdirectories]].  PC-style subdirectories were rejected as being too difficult to work with in terms of block availability maps, then still much in vogue, and which for some time had been the traditional way of inquiring into block availability.  The 1581 supports the [[Commodore 128|C128's]] burst mode for fast disk access, but not when connected to an older Commodore machine like the [[Commodore 64]]. The 1581 provides a total of 3160 blocks free when formatted (a block being equal to 256 [[byte]]s). The number of permitted directory entries was also increased, to 296 entries. With a storage capacity of 800 kB, the 1581 is the highest-capacity serial-bus drive that was ever made by Commodore (the 1-MB SFD-1001 uses the parallel IEEE-488), and the only 3½&quot; one. However, starting in 1991, [[Creative Micro Designs|Creative Micro Designs (CMD)]] made the [[CMD FD-2000|FD-2000]] [[high density]] (1.6&amp;nbsp;MB) and [[CMD FD-4000|FD-4000]] [[extra-high density]] (3.2&amp;nbsp;MB) 3½&quot; drives, both of which offered not only a 1581-emulation mode but also 1541- and 1571-compatibility modes.

Like the [[Commodore 1541|1541]] and [[Commodore 1571|1571]], a nearly identical [[job queue]] is available to the user in [[zero page]] (except for job 0), providing for exceptional degrees of compatibility.

Unlike the cases of the 1541 and 1571, the low-level disk format used by the 1581 is similar enough to the MS-DOS format as the 1581 is built around a [[Western Digital FD1771|WD1770]] FM/MFM floppy controller chip. The 1581 disk format consists of 80 tracks and ten 512 byte sectors per track, used as 20 logical sectors of 256 bytes each&lt;!-- The cited document makes clear that the 256 byte sectors are logical, and that the physical disk format is 512 byte sectors. Also, having just implemented an MFM decoder for 1581 disks, I can confirm that the physical sectors are most definitely 512 bytes, and that there are 10 of them. --&gt;. Special software is required to read 1581 disks on a PC due to the different file system. An internal floppy drive and controller are required as well; USB floppy drives operate strictly at the file system level and do not allow low-level disk access.&lt;ref&gt;{{cite web|title=The floppy controller evolution &amp;#124; OS/2 Museum |date=2007-02-27 |accessdate=2016-05-12 |url=ftp://ftp.mirrorservice.org/sites/www.bitsavers.org/pdf/standardMicrosystems/_dataSheets/USB97CFDC2-01.pdf |quote=  Supports 640K, 720K, 1.44M, 1.2M Windows 98J, and 1.2M NEC DOS 6.x Formats}}&lt;/ref&gt;  The WD1770&lt;!--assumed it was the 1770 version that caused problems, and the 1772 was ok--&gt; controller chip, however, was the seat of some early problems with 1581 drives when the first production runs were recalled due to a high failure rate; the problem was quickly corrected. Later versions of the 1581 drive have a smaller, more streamlined-looking external power supply provided with them.

== Specifications ==
{| class=wikitable
! Quantity !! Value
|-
| Onboard CPU    || [[MOS Technology 6502]] @ 2 [[Hertz|MHz]]
|-
| RAM            || 8 [[kilobyte|kB]]&lt;ref name=z81sv02/&gt;
|-
| ROM            || 32 kB&lt;ref name=z81sv02/&gt;
|-
| Disk controller || [[Western Digital FD1771|WD1770]]&lt;ref name=w81&gt;{{Cite web|author= |accessdate=2016-04-02 |date=2015-03-06 |publication-date= |title=VIC-1581 - C64-Wiki |pages= |publisher= |url=https://www.c64-wiki.com/index.php/VIC-1581 |quote= }}&lt;/ref&gt;&lt;ref name=z81sv02&gt;{{cite web|title=1581 Service manual (page 2)
|date=June 1987
|accessdate=2016-04-28
|url=ftp://www.zimmers.net/pub/cbm/schematics/drives/new/1581/1581-02.gif}}&lt;/ref&gt; or WD1772&lt;ref name=&quot;Lt Kernal - More Information&quot;&gt;{{cite web|title=Lt Kernal - More Information
|date=2007
|url=http://www.floodgap.com/retrobits/ckb/ltk/links.htm}}&lt;/ref&gt;&lt;ref name=z81sv12&gt;{{cite web|title=1581 Service manual (page 12)
|date=June 1987
|accessdate=2016-04-28
|url=ftp://www.zimmers.net/pub/cbm/schematics/drives/new/1581/1581-12.gif}}&lt;/ref&gt;
|-
| Communications controller || [[MOS Technology 8520|MOS Technology 8520A]]&lt;ref name=z81sv02/&gt;
|-
| Transfer protocols || Standard and fast serial; [[Burst mode (computing)|burst mode]]; and commands for parallel interface (the latter not used)
|-
| Disk type      || 3,5&quot; inch
|-
| Storage format || [[Modified Frequency Modulation|MFM]], [[double density]], [[Double-sided disk|double-sided]]
|-
| Interface      || [[Commodore bus|CBM's proprietary serial IEEE-488]]
|-
| Power          || {{nowrap|5 V @ 1 A}} {{nowrap|(5 [[Volt-ampere|VA]])}}&lt;br&gt; {{nowrap|12 V @ 0.5 A}} {{nowrap|(6 VA)}}
|}

{{FOLDOC}}

=== 1581 Image Layout ===
The 1581 disk has 80 logical tracks, each with 40 logical sectors (the actual physical layout of the diskette is abstracted and managed by a hardware translation layer).  The directory starts on 40/3 (track 40, sector 3).  The disk header is on 40/0, and the BAM (block availability map) resides on 40/1 and 40/2.

Header Contents

 $00–01 T/S reference to first directory sector (40/3)
     02 DOS version ('D')
  04-13 Disk Label, $A0 padded
  16-17 Disk ID
  19-1A DOS type ('3D')

BAM Contents, 40/1

 $00–01 T/S to next BAM sector (40/2)
     02 DOS version ('D')
  04-05 Disk ID
     06 I/O byte
     07 Autoboot flag
  10-FF BAM entries for Tracks 1-40

BAM Contents, 40/2

 $00–01 00/FF
     02 DOS version ('D')
  04-05 Disk ID
     06 I/O byte
     07 Autoboot flag
  10-FF BAM entries for Tracks 41-80

== See also ==
* [[Commodore 64 peripherals]]
* [[Commodore 128]]

== References ==
&lt;references/&gt;

== External links ==
*[http://www.d81.de/ d81.de: Permanent home of 1581-Copy], A MS-Windows based Tool uses any standard x86-PC 3.5&quot; drive to WRITE &amp; READ 1581 disk images (d81).
*[http://members.optusnet.com.au/spacetaxi64/MAIN/1581-GAMES.htm optusnet.com.au: 1581 Games, Commodore 1581 Games, D81 , CMD FD2000 &amp; FD4000 Games], Tools &amp; Games specifically for the 1581 disk drive.
*[http://members.optusnet.com.au/spacetaxi64/MAIN/1581-PC-35-DRIVE.htm optusnet.com.au: SEGA SF-7000 with PC 3.5&quot; Floppy Drive, Copy disk to PC and vice versa], How to use a PC 3.5&quot; floppy drive in the 1581 device
*[https://web.archive.org/web/20140203142211/http://vice-emu.sourceforge.net/plain/drive_info.txt vice-emu: Commodore compatible Disk Drives], drive info
*[http://www.students.tut.fi/%7eleinone3/dcn2692/index.html tut.fi: DCN-2692 floppy controller board], C1581 clone (complete)&lt;!--/Links.shtml--&gt;

{{Commodore disk drives}}

[[Category:Products introduced in 1987]]
[[Category:Commodore 64]]
[[Category:CBM floppy disk drives]]
[[Category:CBM hardware]]</text>
      <sha1>il1kra7rn93kyp9mq892uexf1ebpsz9</sha1>
    </revision>
  </page>
